$(document).ready((function(){window.onload=function(){document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),500)};const o={companies:[{id:1,title:"All Beauty",logo:"./img/companies/allbeauty.png",link:"https://www.allbeauty.com/",coupons:[{id:1,shortText:"Save Up to 40%",header:"Save Up to 40% RRP",description:{text:"Makeup Special Offers"}}]},{id:2,title:"B & Q",logo:"./img/companies/B&Q.png",link:"https://www.diy.com/",coupons:[{id:1,shortText:"20% Off",header:"Get 20% Off",description:{text:"20% Off for all kitchens* and bathrooms**"},details:["*When you spent £2,500 on a kitchen","**When you spent £250 on a bathroom"]}]},{id:3,title:"Best Buy",logo:"./img/companies/bestbuy.png",link:"https://www.bestbuy.com/",coupons:[{id:1,shortText:"Up to $300*",header:"Save Up to $300*",description:{text:"*on Select laptops with Student Deals"}}]},{id:4,title:"Charles & Keith",logo:"./img/companies/CharlesAndKeith.png",link:"https://www.charleskeith.eu/",coupons:[{id:1,shortText:"15% Off",header:"Get 15% Discount",description:{title:"Valentine's Day 2022 Collection",text:"Celebrate the season of love with adorable heart-themed accessories"}},{id:2,shortText:"10% Off",header:"Get 10% Discount",description:{title:"New Arrivals",text:"Show off your style personality with our latest shoes, bags and accessories"}}]},{id:5,title:"Deal Extreme (DX)",logo:"./img/companies/dealextreme.png",link:"https://www.dx.com/",coupons:[{id:1,shortText:"5% Off",header:"Get 5% Off",description:{text:"Get up to 35% Off in Flash Deals"}}]},{id:6,title:"Dorothy Perkins",logo:"./img/companies/dorothyperkins.png",link:"https://www.dorothyperkins.com/",coupons:[{id:1,shortText:"Up to 50% Off",header:"Get up to 50% Off",description:{text:"Wear now, layer later <br>Up to 50% Off Trans-Seasonal Staples"}}]},{id:7,title:"GhostBed",logo:"./img/companies/ghostbed.png",link:"https://www.ghostbed.com/",coupons:[{id:1,shortText:"30% Off",header:"Get 30% Off",description:{text:"Biggest Flash Sale <br> Mattresses + 2 Luxury Pillows"}}]},{id:8,title:"Know Fashion Style",logo:"./img/companies/knowfashionstyle.png",link:"https://www.knowfashionstyle.com/",coupons:[{id:1,shortText:"Up to 30% Off",header:"Get Up to 30% Off for Annual Best Sellers",description:{text:'<ul class="coupon__description"><li>- No Minimum Order</li><li>- Shipping Worldwide</li></ul>'}}]},{id:9,title:"Long Tall Sally",logo:"./img/companies/longtallsally.png",link:"https://www.longtallsally.com/",coupons:[{id:1,shortText:"Up to 70% Off",header:"Get Up to 70% Off",description:{text:"Shop the Outlet with up to 70% off"}}]},{id:10,title:"Look Fantastic",logo:"./img/companies/lookfantastic.png",link:"https://www.lookfantastic.com/",coupons:[{id:1,shortText:"Save 20%*",header:'Save 20%*<br> with code: <span class="coupon__text-strong">NEW20</span>',description:{text:"Code available for new customers"},details:["*Code valid on products in list only."]}]},{id:11,title:"Marks & Spencer",logo:"./img/companies/MS.png",link:"https://www.marksandspencer.com/",coupons:[{id:1,shortText:"20% Off",header:"Get 20% Off",description:{text:"Get the discount on selected lines"}}]},{id:12,title:"Samsonite",logo:"./img/companies/samsonite.png",link:"https://shop.samsonite.com/",coupons:[{id:1,shortText:"20% Off",header:'20% Off Site Side <br> Using code: <span class="coupon__text-strong">JOY20</span>',description:{text:'20% Off for all categories: <br> <ul class="coupon__description"><li>- Luggage</li><li>- Backpacks & bags</li><li>- Accessories</li></ul>'}}]},{id:13,title:"Women Secret",logo:"./img/companies/womensecret.png",link:"https://womensecret.com/",coupons:[{id:1,shortText:"50% Off",header:"50% Off on the 2nd item",description:{text:'<ul class="coupon__description"><li>- Bra</li><li>- Briefs</li><li>- Nightwear & Homewear</li><li>- Accessories</li><li>- Men</li><li>- Maternity</li></ul>'}}]},{id:14,title:"Forever21",logo:"./img/companies/forever21.png",link:"https://www.forever21.com/",coupons:[{id:1,shortText:"17% Off",header:"Get 17% Discount",description:{title:"Last chance to get 17% Off",text:"Almost everything"}}]},{id:15,title:"Bad Rhino",logo:"./img/companies/badrhino.png",link:"https://www.badrhino.com/",coupons:[{id:1,shortText:"Up to 70%",header:"Up to 70% Off Selected Lines",description:{text:"Further reductions CLEARANCE"}}]},{id:16,title:"Rohan",logo:"./img/companies/rohan.png",link:"https://www.rohan.co.uk/",coupons:[{id:1,shortText:"50% Off",header:"Get 50% Discount",description:{text:"Even more further reductions. The Winter Sale. Many lines 50% Off"}}]}]},t=$(".burger, .header__nav-wrapper, body");$(".header__burger").on("click",()=>t.toggleClass("show"));new Swiper(".preview__slider",{slidesPerView:1,loop:!0,centeredSlides:!0,autoplay:{delay:3e3,disableOnInteraction:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});$("#goBack").on("click",()=>history.back());const e=window.matchMedia("(max-width: 768px)");let i=5;i=e.matches?5:10;const n=$(".preview__stores-body"),s=[];$("#stores-loader").fadeOut(),0!==o.companies.length?o.companies.map((o,t)=>{t>=i||n.append((function(){return $("<div></div>",{class:"preview__stores-item","data-id":o.id}).append((function(){return $("<img>",{src:o.logo,alt:o.title})}))}))}):$(".preview__stores").remove();let l=localStorage.getItem("companyId");const a=function(){localStorage.setItem("companyId",$(this).attr("data-id")),location.href="http://localhost:3000/coupons.html"};n.on("click",".preview__stores-item",a);const c=$(".stores__body");let r=1;const d=function(o,t){const e=8*o,i=e-8;return t.slice(i,e)};window.addEventListener("scroll",()=>{if(window.scrollY+window.innerHeight>=document.documentElement.scrollHeight){if(r++,0===d(r,o.companies).length)return;$("#stores-loader").fadeIn().delay(500).fadeOut(),$("body").addClass("show"),setTimeout(()=>{p(d(r,o.companies)),$("body").removeClass("show"),console.log(o.companies)},500)}});const p=(o,t)=>{if(0===o.length&&t)c.append((function(){return $("<h2></h2>",{class:"stores__empty-search",text:"Sorry, 0 Stores Available"})}));else{if(0===o.length)return;o.map(o=>{c.append((function(){return $("<div></div>",{class:"stores__item"}).append((function(){return $("<div></div>",{class:"stores__image"}).append((function(){return $("<img>",{src:o.logo,alt:o.title})}))})).append((function(){return $("<div></div>",{class:"stores__button",text:"View Details","data-id":o.id})}))}))})}s.splice(0,s.length)};c.on("click",".stores__button",a);const u=$("#search"),h=$("#searcBtn"),m=localStorage.getItem("searchValue");let _="";const f=function(t){var e;e=t,o.companies.map(o=>{o.title.toLowerCase().includes(e)&&s.push(o)}),c.empty(),p(d(r,s),"search")};window.location.href.includes("stores")&&null===m?p(d(r,o.companies)):(f(m),u.val(m),localStorage.removeItem("searchValue")),h.on("click",(function(){_=u.val().toLowerCase(),window.location.href.includes("stores")?f(_):(localStorage.setItem("searchValue",_),location.href="http://localhost:3000/stores.html")}));let g=(t=>o.companies.find(o=>o.id===Number(t)))(l);void 0!==g&&$(".store__company-logo").attr("src",g.logo).attr("alt",g.title),$(".store__coupons").on("click",".coupon__details-btn",(function(){$(this).parent().find(".coupon__footer-body").toggleClass("show")})),g.coupons.map(o=>{const t=void 0!==o.details?o.details.map(o=>`<li class="coupon__footer-list-item coupon__footer-list-item_strong">${o}</li>`).join(" "):" ",e=void 0!==o.details?`<ul class="coupon__footer-list-strong">\n            ${t}\n          </ul>`:" ",i=void 0!==o.description.title?`<span class="coupon__description-title">${o.description.title}</  span>`:" ",n=void 0!==o.description.text?""+o.description.text:" ";return $(".store__coupons").append((function(){return`\n        <div class="store__coupon coupon">\n          <div class="coupon__body">\n            <p class="coupon__header">Valid Till 28-02-2022</p>\n            <div class="coupon__content">\n              <div class="coupon__shorts">\n                <p class="coupon__shorts-text">${o.shortText}</p>\n              </div>\n              <div class="coupon__about">\n                <p class="coupon__title">${o.header}</p>\n                <p class="coupon__description">\n                  ${i}\n                  ${n}\n                </p>\n                <div class="coupon__button button" data-button-id="${o.id}">GET DEAL</div>\n              </div>\n            </div>\n          </div>\n          <div class="coupon__footer">\n            <p class="coupon__details-btn">Show Details</p>\n            <div class="coupon__footer-body">\n              <p class="coupon__footer-title">Terms and conditions:</p>\n              <ul class="coupon__footer-list">\n                <li class="coupon__footer-list-item">\n                  - Applicable For All Registered Members and for Guest Checkout\n                  too.\n                </li>\n                <li class="coupon__footer-list-item">\n                  - No Coupon Code Required to Avail this discount.\n                </li>\n                <li class="coupon__footer-list-item">\n                  - Valid For Limited Period Only.\n                </li>\n                <li>\n                  ${e}\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>`}))}),$(".store__body").on("click",".coupon__button",(function(){localStorage.setItem("couponId",$(this).attr("data-button-id")),location.href="http://localhost:3000/coupon.html"}));let w=localStorage.getItem("couponId");(o=>{const t=o.coupons.find(o=>o.id===Number(w)),e=void 0!==t.details?t.details.map(o=>`<li class="coupon__footer-list-item coupon__footer-list-item_strong">${o}</li>`).join(" "):" ",i=void 0!==t.details?`<ul class="coupon__footer-list-strong">\n            ${e}\n          </ul>`:" ",n=void 0!==t.description.title?`<span class="coupon__description-title">${t.description.title}</  span>`:" ",s=void 0!==t.description.text?""+t.description.text:" ";$(".coupon-item__body").append((function(){return`\n        <div class="coupon-item__company">\n          <div class="coupon-item__image">\n            <img src="${o.logo}" alt="${o.title}" />\n          </div>\n          <h1 class="coupon__shorts-text">${t.header}</h1>\n        </div>\n        <div class="coupon-item__about coupon-item__about">\n          <p class="coupon__description coupon-item__description">\n            ${n}\n            ${s}\n          </p>\n          <div>\n            <p class="coupon__footer-title coupon-item__footer-title">Terms and conditions:</p>\n            <ul class="coupon__footer-list coupon-item__footer-list">\n              <li class="coupon__footer-list-item">\n                - Applicable For All Registered Members and for Guest Checkout\n                too.\n              </li>\n              <li class="coupon__footer-list-item">\n                - No Coupon Code Required to Avail this discount.\n              </li>\n              <li class="coupon__footer-list-item">\n                - Valid For Limited Period Only.\n              </li>\n              <li>\n                ${i}\n              </li>\n            </ul>\n          </div>\n          <a href='${o.link}' class="button coupon-item__button">GET DEAL</a>\n        </div>`}))})(g)}));